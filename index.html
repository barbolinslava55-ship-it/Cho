<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–°–û–°–ù–û–í–°–ö–ê–Ø –ù–ò–í–ê ‚Äî –ì–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --accent: #0088cc;
            --bg: #f5f7fa;
            --text: #2d3436;
            --white: #ffffff;
            --border: #e1e8ed;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif; }

        body { background-color: var(--bg); color: var(--text); line-height: 1.6; }

        /* –≠–ª–µ–≥–∞–Ω—Ç–Ω—ã–π —Å–Ω–µ–≥ –¥–ª—è —Å–≤–µ—Ç–ª–æ–π —Ç–µ–º—ã */
        #snow { position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 1; }
        .flake { position: absolute; background: #cbd5e0; border-radius: 50%; opacity: 0.3; animation: fall linear infinite; }
        @keyframes fall { to { transform: translateY(100vh); } }

        .wrapper { position: relative; z-index: 2; max-width: 480px; margin: 0 auto; padding: 20px; }

        header { text-align: center; padding: 40px 0 20px; }
        .brand { font-size: 24px; font-weight: 900; letter-spacing: 1px; color: #1a1a1a; text-transform: uppercase; border-bottom: 3px solid var(--accent); display: inline-block; margin-bottom: 10px; }
        
        .card { background: var(--white); border-radius: 20px; padding: 30px; box-shadow: 0 10px 25px rgba(0,0,0,0.05); border: 1px solid var(--border); margin-bottom: 20px; }
        
        h1 { font-size: 22px; text-align: center; margin-bottom: 15px; color: #1a1a1a; }
        p.subtitle { text-align: center; color: #636e72; font-size: 14px; margin-bottom: 30px; }

        /* –°–ø–∏—Å–æ–∫ –∫–∞–Ω–¥–∏–¥–∞—Ç–æ–≤ */
        .option { display: flex; align-items: center; padding: 15px; border: 2px solid var(--border); border-radius: 15px; margin-bottom: 12px; cursor: pointer; transition: all 0.2s; }
        .option:hover { border-color: var(--accent); background: #f0f9ff; }
        .option.active { border-color: var(--accent); background: #f0f9ff; box-shadow: 0 0 0 3px rgba(0,136,204,0.1); }
        
        .radio { width: 22px; height: 22px; border: 2px solid var(--border); border-radius: 50%; margin-right: 15px; position: relative; }
        .active .radio { border-color: var(--accent); }
        .active .radio::after { content: ''; position: absolute; width: 12px; height: 12px; background: var(--accent); border-radius: 50%; top: 3px; left: 3px; }

        .name { font-weight: 600; font-size: 16px; }
        .desc { font-size: 12px; color: #b2bec3; }

        /* –ö–Ω–æ–ø–∫–∞ */
        .btn-main { width: 100%; padding: 18px; background: var(--accent); color: white; border: none; border-radius: 15px; font-size: 16px; font-weight: 700; cursor: pointer; transition: 0.3s; margin-top: 10px; display: none; }
        .btn-main:hover { opacity: 0.9; transform: translateY(-1px); }
        .btn-main:disabled { background: #dfe6e9; cursor: not-allowed; }

        /* –°–µ–∫—Ü–∏–∏ */
        #vote-step, #final-step { display: none; }
        .auth-center { text-align: center; }
        .tg-wrap { display: flex; justify-content: center; margin-top: 20px; }

        footer { text-align: center; font-size: 12px; color: #b2bec3; margin-top: 30px; }
    </style>
</head>
<body>

<div id="snow"></div>

<div class="wrapper">
    <header>
        <div class="brand">–°–æ—Å–Ω–æ–≤—Å–∫–∞—è –ù–∏–≤–∞</div>
    </header>

    <div id="auth-step" class="card auth-center">
        <h1>–ì–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ</h1>
        <p class="subtitle">–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –ª–∏—á–Ω–æ—Å—Ç—å —á–µ—Ä–µ–∑ Telegram, —á—Ç–æ–±—ã –≤–∞—à –≥–æ–ª–æ—Å –±—ã–ª —É—á—Ç–µ–Ω –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ.</p>
        <div class="tg-wrap">
            <script async src="https://telegram.org/js/telegram-widget.js?22" 
                data-telegram-login="@uefhytfghbot" 
                data-size="large" 
                data-onauth="onTelegramAuth(user)" 
                data-request-access="write"></script>
        </div>
    </div>

    <div id="vote-step" class="card">
        <h1 id="user-hello">–í—ã–±–µ—Ä–∏—Ç–µ –∫–∞–Ω–¥–∏–¥–∞—Ç–∞</h1>
        <p class="subtitle">–í—ã –º–æ–∂–µ—Ç–µ –≤—ã–±—Ä–∞—Ç—å —Ç–æ–ª—å–∫–æ –æ–¥–Ω–æ–≥–æ —É—á–∞—Å—Ç–Ω–∏–∫–∞</p>
        
        <div class="option" onclick="select(1)" data-id="1">
            <div class="radio"></div>
            <div>
                <div class="name">–ê–ª–µ–∫—Å–∞–Ω–¥—Ä –ë–µ–ª–æ—É—Å–æ–≤</div>
                <div class="desc">–£—á–∞—Å—Ç–Ω–∏–∫ ‚Ññ1</div>
            </div>
        </div>

        <div class="option" onclick="select(2)" data-id="2">
            <div class="radio"></div>
            <div>
                <div class="name">–ï–≤–≥–µ–Ω–∏–π –ì–æ–ª–æ–≤–∏–Ω</div>
                <div class="desc">–£—á–∞—Å—Ç–Ω–∏–∫ ‚Ññ2</div>
            </div>
        </div>

        <div class="option" onclick="select(3)" data-id="3">
            <div class="radio"></div>
            <div>
                <div class="name">–í–∞–ª–µ—Ä–∏—è –ë–∞—Ä–±–æ–ª–∏–Ω–∞</div>
                <div class="desc">–£—á–∞—Å—Ç–Ω–∏—Ü–∞ ‚Ññ3</div>
            </div>
        </div>

        <button id="submit-btn" class="btn-main" onclick="confirmVote()">–ü–û–î–¢–í–ï–†–î–ò–¢–¨ –ì–û–õ–û–°</button>
    </div>

    <div id="final-step" class="card auth-center">
        <i class="fas fa-check-circle" style="color: #00b894; font-size: 60px; margin-bottom: 20px;"></i>
        <h1>–ì–æ–ª–æ—Å –ø—Ä–∏–Ω—è—Ç!</h1>
        <p class="subtitle">–°–ø–∞—Å–∏–±–æ –∑–∞ —É—á–∞—Å—Ç–∏–µ. –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –±—É–¥—É—Ç –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω—ã –≤ –≥–∞–∑–µ—Ç–µ ¬´–°–æ—Å–Ω–æ–≤—Å–∫–∞—è –Ω–∏–≤–∞¬ª.</p>
    </div>

    <footer>¬© 2026 –†–µ–¥–∞–∫—Ü–∏—è ¬´–°–æ—Å–Ω–æ–≤—Å–∫–∞—è –Ω–∏–≤–∞¬ª<br>–û—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π –∫–æ–Ω–∫—É—Ä—Å —Å—Ç–∏—Ö–æ—Ç–≤–æ—Ä—Ü–µ–≤</footer>
</div>

<script>
    // –¢–í–û–ò –î–ê–ù–ù–´–ï
    const TOKEN = '8190033537:AAEmk-nMHAlrjmp5389rCbRoP6q0IqHw-K0';
    const CHAT_ID = '8491418744';

    let selectedId = null;
    let user = JSON.parse(localStorage.getItem('voter'));

    // –ü—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
    window.onload = () => {
        initSnow();
        if (localStorage.getItem('voted')) {
            showStep('final-step');
        } else if (user) {
            showStep('vote-step');
            document.getElementById('user-hello').innerText = `–ü—Ä–∏–≤–µ—Ç, ${user.first_name}!`;
        }
    };

    // –í—Ö–æ–¥ —á–µ—Ä–µ–∑ Telegram
    function onTelegramAuth(tgUser) {
        user = tgUser;
        localStorage.setItem('voter', JSON.stringify(tgUser));
        
        // –õ–æ–≥ –≤—Ö–æ–¥–∞
        sendToBot(`üîî <b>–í—Ö–æ–¥ –Ω–∞ —Å–∞–π—Ç</b>\n–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: ${user.first_name} ${user.last_name || ''}\nID: <code>${user.id}</code>\nUsername: @${user.username || '—Å–∫—Ä—ã—Ç'}`);
        
        showStep('vote-step');
        document.getElementById('user-hello').innerText = `–ü—Ä–∏–≤–µ—Ç, ${user.first_name}!`;
    }

    function select(id) {
        selectedId = id;
        document.querySelectorAll('.option').forEach(el => el.classList.remove('active'));
        document.querySelector(`.option[data-id="${id}"]`).classList.add('active');
        document.getElementById('submit-btn').style.display = 'block';
    }

    async function confirmVote() {
        const btn = document.getElementById('submit-btn');
        const name = document.querySelector(`.option[data-id="${selectedId}"] .name`).innerText;
        
        btn.disabled = true;
        btn.innerText = "–û–¢–ü–†–ê–í–ö–ê...";

        const text = `üó≥ <b>–ù–û–í–´–ô –ì–û–õ–û–°!</b>\n‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ\nüë§ <b>–û—Ç:</b> ${user.first_name} (@${user.username || user.id})\n‚≠ê <b>–ó–∞:</b> ${name}\n‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ`;

        const ok = await sendToBot(text);
        if (ok) {
            localStorage.setItem('voted', 'true');
            showStep('final-step');
        } else {
            alert("–û—à–∏–±–∫–∞ —Å–µ—Ç–∏. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.");
            btn.disabled = false;
        }
    }

    async function sendToBot(text) {
        try {
            const res = await fetch(`https://api.telegram.org/bot${TOKEN}/sendMessage`, {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({ chat_id: CHAT_ID, text: text, parse_mode: 'HTML' })
            });
            return res.ok;
        } catch (e) { return false; }
    }

    function showStep(stepId) {
        document.getElementById('auth-step').style.display = 'none';
        document.getElementById('vote-step').style.display = 'none';
        document.getElementById('final-step').style.display = 'none';
        document.getElementById(stepId).style.display = 'block';
    }

    function initSnow() {
        const c = document.getElementById('snow');
        for (let i = 0; i < 30; i++) {
            let f = document.createElement('div');
            f.className = 'flake';
            f.style.left = Math.random() * 100 + 'vw';
            f.style.width = f.style.height = (Math.random() * 4 + 2) + 'px';
            f.style.animationDuration = (Math.random() * 3 + 4) + 's';
            f.style.opacity = Math.random();
            c.appendChild(f);
        }
    }
</script>

</body>
</html>
